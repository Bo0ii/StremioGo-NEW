"use strict";(self["webpackChunkpeario_client"]=self["webpackChunkpeario_client"]||[]).push([[2269],{1594:function(e,a,s){s.d(a,{A:function(){return r}});var l=s(641);const t={class:"loading"};function n(e,a){const s=(0,l.g2)("ion-icon");return(0,l.uX)(),(0,l.CE)("div",t,[(0,l.bF)(s,{name:"sync-outline",class:"icon spin"})])}var i=s(6262);const u={},o=(0,i.A)(u,[["render",n],["__scopeId","data-v-274feeaf"]]);var r=o},6577:function(e,a,s){s.r(a),s.d(a,{default:function(){return Z}});s(4114),s(8111),s(2489),s(116),s(1701),s(7642),s(8004),s(3853),s(5876),s(2475),s(5024),s(1698);var l=s(641),t=s(3751),n=s(33),i=s(953),u=s(6992),o=s(4162),r=s(9325),v=s(5896),d=s(6335),c=s(5688),m=s(6631),p=s(5019),k=s(1650),g=s(5723),_=s(8126),y=s(1594);const b={class:"streams"},f={class:"content"},A={key:0},C={key:1},E={class:"no-streams"},L={class:"icon"},w=["src"],X={class:"info"},R={key:0,class:"name"},F={class:"small-icon"},V=["src"],h={key:0,class:"type"};var K={__name:"Streams",props:{streams:Array,loading:Boolean},emits:["streamClick"],setup(e,{emit:a}){const{t:s}=(0,u.s9)(),o=e,r=a,v=(0,i.KR)(null),d=(0,l.EW)(()=>{const e=[...new Set(o.streams.map(({addon:e})=>e.transportUrl))];return e.length?[{id:null},...e.map(e=>{const a=o.streams.find(({addon:a})=>a.transportUrl===e);return a&&a.addon?{id:a.addon.transportUrl,label:a.addon.manifest.name}:null}).filter(e=>e)]:[]}),c=(0,l.EW)(()=>null!==v.value?o.streams.filter(({addon:e})=>e.transportUrl===v.value):o.streams),m=e=>{r("streamClick",e)};return(e,a)=>{const u=(0,l.g2)("ion-icon");return(0,l.uX)(),(0,l.CE)("div",b,[(0,l.bF)(_.A,{class:"streams-title",icon:"play-outline",type:"secondary",translate:"views.stream.streams.title"}),(0,l.Lk)("div",f,[(0,l.bF)(p.A,{segments:d.value,modelValue:v.value,"onUpdate:modelValue":a[0]||(a[0]=e=>v.value=e)},{segment:(0,l.k6)(({segment:e})=>[null!==e.id?((0,l.uX)(),(0,l.CE)("span",A,(0,n.v_)(e.label),1)):((0,l.uX)(),(0,l.CE)("span",C,(0,n.v_)((0,i.R1)(s)("views.stream.all")),1))]),_:1},8,["segments","modelValue"]),(0,l.bo)((0,l.Lk)("div",E,[(0,l.Lk)("div",null,[(0,l.bF)(u,{name:"sad"}),(0,l.Lk)("p",null,(0,n.v_)((0,i.R1)(s)("views.stream.streams.error")),1)])],512),[[t.aG,!o.loading&&!c.value.length]]),(0,l.bo)((0,l.bF)(y.A,{class:"loading"},null,512),[[t.aG,o.loading]]),(0,l.bo)((0,l.bF)(k.A,{class:"list",items:c.value,onClick:m},{left:(0,l.k6)(({item:e})=>[(0,l.Lk)("div",L,[(0,l.Lk)("img",{src:e.icon,alt:""},null,8,w),(0,l.bF)(u,{class:"outline",name:"play-outline"}),(0,l.bF)(u,{class:"filled",name:"play"})])]),right:(0,l.k6)(({item:e})=>[(0,l.Lk)("div",X,[e.name?((0,l.uX)(),(0,l.CE)("div",R,[(0,l.Lk)("div",F,[(0,l.Lk)("img",{src:e.icon,alt:""},null,8,V)]),(0,l.eW)(" "+(0,n.v_)(e.name),1)])):(0,l.Q3)("",!0),(0,l.Lk)("div",{class:(0,n.C4)(["title",{extend:!e.name}])},(0,n.v_)(e.title),3)]),e.type?((0,l.uX)(),(0,l.CE)("div",h,(0,n.v_)(e.type),1)):(0,l.Q3)("",!0)]),_:1},8,["items"]),[[t.aG,!o.loading&&c.value.length]])])])}}},W=s(6262);const U=(0,W.A)(K,[["__scopeId","data-v-d694413c"]]);var S=U;const B={class:"stream"},Q={class:"background"},I={key:0,class:"meta"},G=["src"],M={key:1,class:"title"},T={class:"details"},x={class:"year"},$={class:"runtime"},j={class:"description"},q={class:"tags"},z={key:1,class:"series"},D={key:0},H={key:1},J={class:"number"},N={class:"name"};var O={__name:"Stream",setup(e){const{t:a}=(0,u.s9)(),s=(0,i.KR)(!1),_=(0,i.KR)({}),y=(0,i.KR)([]),b=(0,i.KR)(1),f=(0,i.KR)(null),A=(0,i.KR)([]),C=(0,i.KR)(!1),E=(0,l.EW)(()=>o.A.state.client.room),L=(0,l.EW)(()=>o.A.state.addons.collection),w=(0,l.EW)(()=>o.A.state.addons.installed),X=(0,l.EW)(()=>_.value&&"series"===_.value.type),R=(0,l.EW)(()=>_.value&&_.value.videos&&_.value.videos.filter(e=>e.season===b.value).sort((e,a)=>e.episode-a.episode));let F=null;const V=()=>{s.value=!0,clearTimeout(F),F=setTimeout(async()=>{const{id:e,type:a}=r.A.currentRoute.value.params;if(e&&a){const s=L.value&&L.value.streams.filter(e=>w.value.includes(e.transportUrl));s&&(A.value=await d.A.getStreams(s,a,e))}s.value=!1},250)},h=e=>{c.A.send("room.new",{stream:e,meta:_.value})};return(0,l.wB)(w,()=>V()),(0,l.wB)(b,()=>V()),(0,l.wB)(f,e=>{r.A.replace({path:e.id}),V()}),(0,l.wB)(E,({id:e})=>{r.A.push({name:"room",params:{id:e}})}),(0,l.sV)(async()=>{const{type:e,id:a}=r.A.currentRoute.value.params;if(a&&e){const[s,l]=a.split(":");if(_.value="movie"===e?await v.A.getMetaMovie(s):await v.A.getMetaSeries(s),_.value&&_.value.videos&&_.value.videos.length){const e=_.value.videos.find(({id:e})=>e===a)||_.value.videos[0];b.value=parseInt(l)||1,f.value=e,y.value=[...new Set(_.value.videos.map(({season:e})=>e))].sort((e,a)=>0===e?1:0===a?-1:e-a)}V()}}),(e,u)=>((0,l.uX)(),(0,l.CE)("div",B,[(0,l.bF)(t.eB,{name:"fade"},{default:(0,l.k6)(()=>[C.value?((0,l.uX)(),(0,l.Wv)(m.A,{key:0,modelValue:C.value,"onUpdate:modelValue":u[0]||(u[0]=e=>C.value=e)},null,8,["modelValue"])):(0,l.Q3)("",!0)]),_:1}),(0,l.Lk)("div",Q,[u[4]||(u[4]=(0,l.Lk)("div",{class:"blur"},null,-1)),_.value&&_.value.background?((0,l.uX)(),(0,l.CE)("div",{key:0,class:"image",style:(0,n.Tr)(`background-image: url(${_.value.background})`)},null,4)):(0,l.Q3)("",!0)]),_.value?((0,l.uX)(),(0,l.CE)("div",I,[_.value.logo?((0,l.uX)(),(0,l.CE)("img",{key:0,class:"logo",src:_.value.logo,alt:""},null,8,G)):((0,l.uX)(),(0,l.CE)("div",M,(0,n.v_)(_.value.name),1)),(0,l.Lk)("div",T,[(0,l.Lk)("div",x,(0,n.v_)(_.value.year),1),(0,l.Lk)("div",$,(0,n.v_)(_.value.runtime),1)]),(0,l.Lk)("div",j,(0,n.v_)(_.value.description),1),(0,l.Lk)("div",q,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(_.value.genres,e=>((0,l.uX)(),(0,l.CE)("div",{class:"tag",key:e},(0,n.v_)(e),1))),128))])])):(0,l.Q3)("",!0),X.value?((0,l.uX)(),(0,l.CE)("div",z,[(0,l.bF)(p.A,{segments:y.value,modelValue:b.value,"onUpdate:modelValue":u[1]||(u[1]=e=>b.value=e)},{segment:(0,l.k6)(({segment:e})=>[e>0?((0,l.uX)(),(0,l.CE)("span",D,(0,n.v_)((0,i.R1)(a)("views.stream.season"))+" "+(0,n.v_)(e),1)):((0,l.uX)(),(0,l.CE)("span",H,(0,n.v_)((0,i.R1)(a)("views.stream.misc")),1))]),_:1},8,["segments","modelValue"]),(0,l.bF)(k.A,{fixed:"",class:"list",modelValue:f.value,"onUpdate:modelValue":u[2]||(u[2]=e=>f.value=e),items:R.value,itemKey:"id"},{left:(0,l.k6)(({item:e})=>[(0,l.Lk)("div",J,(0,n.v_)(e.episode),1)]),right:(0,l.k6)(({item:e})=>[(0,l.Lk)("div",N,(0,n.v_)(e.name),1)]),_:1},8,["modelValue","items"])])):(0,l.Q3)("",!0),(0,l.bF)(S,{streams:A.value,loading:s.value,onStreamClick:h},null,8,["streams","loading"]),(0,l.bF)(g.A,{large:"",class:"addons-button",icon:"cube-outline",onClick:u[3]||(u[3]=e=>C.value=!0)},{default:(0,l.k6)(()=>[(0,l.eW)((0,n.v_)((0,i.R1)(a)("views.stream.streams.button")),1)]),_:1})]))}};const P=(0,W.A)(O,[["__scopeId","data-v-1b78fadb"]]);var Y=P,Z=Y}}]);