"use strict";(self["webpackChunkpeario_client"]=self["webpackChunkpeario_client"]||[]).push([[2269],{2478:function(e,n,a){var t=a(79504),r=a(48981),u=Math.floor,l=t("".charAt),i=t("".replace),s=t("".slice),o=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,c=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,n,a,t,v,d){var f=a+e.length,m=t.length,p=c;return void 0!==v&&(v=r(v),p=o),i(d,p,function(r,i){var o;switch(l(i,0)){case"$":return"$";case"&":return e;case"`":return s(n,0,a);case"'":return s(n,f);case"<":o=v[s(i,1,-1)];break;default:var c=+i;if(0===c)return r;if(c>m){var d=u(c/10);return 0===d?r:d<=m?void 0===t[d-1]?l(i,1):t[d-1]+l(i,1):r}o=t[c-1]}return void 0===o?"":o})}},25440:function(e,n,a){var t=a(18745),r=a(69565),u=a(79504),l=a(89228),i=a(79039),s=a(28551),o=a(94901),c=a(20034),v=a(91291),d=a(18014),f=a(655),m=a(67750),p=a(57829),g=a(55966),k=a(2478),b=a(61034),A=a(56682),_=a(78227),h=_("replace"),y=Math.max,E=Math.min,w=u([].concat),C=u([].push),x=u("".indexOf),L=u("".slice),R=function(e){return void 0===e?e:String(e)},X=function(){return"$0"==="a".replace(/./,"$0")}(),F=function(){return!!/./[h]&&""===/./[h]("a","$0")}(),V=!i(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")});l("replace",function(e,n,a){var u=F?"$":"$0";return[function(e,a){var t=m(this),u=c(e)?g(e,h):void 0;return u?r(u,e,t,a):r(n,f(t),e,a)},function(e,r){var l=s(this),i=f(e);if("string"==typeof r&&-1===x(r,u)&&-1===x(r,"$<")){var c=a(n,l,i,r);if(c.done)return c.value}var m=o(r);m||(r=f(r));var g,_=f(b(l)),h=-1!==x(_,"g");h&&(g=-1!==x(_,"u"),l.lastIndex=0);var X,F=[];while(1){if(X=A(l,i),null===X)break;if(C(F,X),!h)break;var V=f(X[0]);""===V&&(l.lastIndex=p(i,d(l.lastIndex),g))}for(var $="",K=0,W=0;W<F.length;W++){X=F[W];for(var S,U=f(X[0]),I=y(E(v(X.index),i.length),0),B=[],M=1;M<X.length;M++)C(B,R(X[M]));var Q=X.groups;if(m){var T=w([U],B,I,i);void 0!==Q&&C(T,Q),S=f(t(r,void 0,T))}else S=k(U,i,I,B,Q,r);I>=K&&($+=L(i,K,I)+S,K=I+U.length)}return $+L(i,K)}]},!V||!X||F)},31594:function(e,n,a){a.d(n,{A:function(){return o}});var t=a(20641),r={class:"loading"};function u(e,n){var a=(0,t.g2)("ion-icon");return(0,t.uX)(),(0,t.CE)("div",r,[(0,t.bF)(a,{name:"sync-outline",class:"icon spin"})])}var l=a(66262);const i={},s=(0,l.A)(i,[["render",u],["__scopeId","data-v-274feeaf"]]);var o=s},56682:function(e,n,a){var t=a(69565),r=a(28551),u=a(94901),l=a(44576),i=a(57323),s=TypeError;e.exports=function(e,n){var a=e.exec;if(u(a)){var o=t(a,e,n);return null!==o&&r(o),o}if("RegExp"===l(e))return t(i,e,n);throw new s("RegExp#exec called on incompatible receiver")}},57829:function(e,n,a){var t=a(68183).charAt;e.exports=function(e,n,a){return n+(a?t(e,n).length:1)}},76577:function(e,n,a){a.r(n),a.d(n,{default:function(){return te}});var t=a(59258),r=a(78676),u=a(20908),l=a(30388),i=(a(52675),a(89463),a(2008),a(50113),a(74423),a(62062),a(44114),a(26910),a(62010),a(18111),a(22489),a(20116),a(61701),a(26099),a(27495),a(31415),a(17642),a(58004),a(33853),a(45876),a(32475),a(15024),a(31698),a(21699),a(47764),a(25440),a(62953),a(20641)),s=a(53751),o=a(90033),c=a(50953),v=a(46992),d=a(34162),f=a(39325),m=a(35896),p=a(16335),g=a(75688),k=a(76631),b=a(5019),A=a(81650),_=a(25723),h=(a(28706),a(78126)),y=a(31594),E={class:"streams"},w={class:"content"},C={key:0},x={key:1},L={class:"no-streams"},R={class:"icon"},X=["src"],F={class:"info"},V={key:0,class:"name"},$={class:"small-icon"},K=["src"],W={key:0,class:"type"},S={__name:"Streams",props:{streams:Array,loading:Boolean},emits:["streamClick"],setup:function(e,n){var a=n.emit,r=(0,v.s9)(),u=r.t,l=e,d=a,f=(0,c.KR)(null),m=(0,i.EW)(function(){var e=(0,t.A)(new Set(l.streams.map(function(e){var n=e.addon;return n.transportUrl})));return e.length?[{id:null}].concat((0,t.A)(e.map(function(e){var n=l.streams.find(function(n){var a=n.addon;return a.transportUrl===e});return n&&n.addon?{id:n.addon.transportUrl,label:n.addon.manifest.name}:null}).filter(function(e){return e}))):[]}),p=(0,i.EW)(function(){return null!==f.value?l.streams.filter(function(e){var n=e.addon;return n.transportUrl===f.value}):l.streams}),g=function(e){d("streamClick",e)};return function(e,n){var a=(0,i.g2)("ion-icon");return(0,i.uX)(),(0,i.CE)("div",E,[(0,i.bF)(h.A,{class:"streams-title",icon:"play-outline",type:"secondary",translate:"views.stream.streams.title"}),(0,i.Lk)("div",w,[(0,i.bF)(b.A,{segments:m.value,modelValue:f.value,"onUpdate:modelValue":n[0]||(n[0]=function(e){return f.value=e})},{segment:(0,i.k6)(function(e){var n=e.segment;return[null!==n.id?((0,i.uX)(),(0,i.CE)("span",C,(0,o.v_)(n.label),1)):((0,i.uX)(),(0,i.CE)("span",x,(0,o.v_)((0,c.R1)(u)("views.stream.all")),1))]}),_:1},8,["segments","modelValue"]),(0,i.bo)((0,i.Lk)("div",L,[(0,i.Lk)("div",null,[(0,i.bF)(a,{name:"sad"}),(0,i.Lk)("p",null,(0,o.v_)((0,c.R1)(u)("views.stream.streams.error")),1)])],512),[[s.aG,!l.loading&&!p.value.length]]),(0,i.bo)((0,i.bF)(y.A,{class:"loading"},null,512),[[s.aG,l.loading]]),(0,i.bo)((0,i.bF)(A.A,{class:"list",items:p.value,onClick:g},{left:(0,i.k6)(function(e){var n=e.item;return[(0,i.Lk)("div",R,[(0,i.Lk)("img",{src:n.icon,alt:""},null,8,X),(0,i.bF)(a,{class:"outline",name:"play-outline"}),(0,i.bF)(a,{class:"filled",name:"play"})])]}),right:(0,i.k6)(function(e){var n=e.item;return[(0,i.Lk)("div",F,[n.name?((0,i.uX)(),(0,i.CE)("div",V,[(0,i.Lk)("div",$,[(0,i.Lk)("img",{src:n.icon,alt:""},null,8,K)]),(0,i.eW)(" "+(0,o.v_)(n.name),1)])):(0,i.Q3)("",!0),(0,i.Lk)("div",{class:(0,o.C4)(["title",{extend:!n.name}])},(0,o.v_)(n.title),3)]),n.type?((0,i.uX)(),(0,i.CE)("div",W,(0,o.v_)(n.type),1)):(0,i.Q3)("",!0)]}),_:1},8,["items"]),[[s.aG,!l.loading&&p.value.length]])])])}}},U=a(66262);const I=(0,U.A)(S,[["__scopeId","data-v-d694413c"]]);var B=I,M={class:"stream"},Q={class:"background"},T={key:0,class:"meta"},G=["src"],O={key:1,class:"title"},j={class:"details"},q={class:"year"},z={class:"runtime"},D={class:"description"},H={class:"tags"},J={key:1,class:"series"},N={key:0},P={key:1},Y={class:"number"},Z={class:"name"},ee={__name:"Stream",setup:function(e){var n=(0,v.s9)(),a=n.t,h=(0,c.KR)(!1),y=(0,c.KR)({}),E=(0,c.KR)([]),w=(0,c.KR)(1),C=(0,c.KR)(null),x=(0,c.KR)([]),L=(0,c.KR)(!1),R=(0,i.EW)(function(){return d.A.state.client.room}),X=(0,i.EW)(function(){return d.A.state.addons.collection}),F=(0,i.EW)(function(){return d.A.state.addons.installed}),V=(0,i.EW)(function(){return y.value&&"series"===y.value.type}),$=(0,i.EW)(function(){return y.value&&y.value.videos&&y.value.videos.filter(function(e){return e.season===w.value}).sort(function(e,n){return e.episode-n.episode})}),K=null,W=function(){h.value=!0,clearTimeout(K),K=setTimeout((0,l.A)((0,u.A)().m(function e(){var n,a,t,r;return(0,u.A)().w(function(e){while(1)switch(e.n){case 0:if(n=f.A.currentRoute.value.params,a=n.id,t=n.type,!a||!t){e.n=2;break}if(r=X.value&&X.value.streams.filter(function(e){return F.value.includes(e.transportUrl)}),!r){e.n=2;break}return e.n=1,p.A.getStreams(r,t,a);case 1:x.value=e.v;case 2:h.value=!1;case 3:return e.a(2)}},e)})),250)},S=function(e){g.A.send("room.new",{stream:e,meta:y.value})};return(0,i.wB)(F,function(){return W()}),(0,i.wB)(w,function(){return W()}),(0,i.wB)(C,function(e){f.A.replace({path:e.id}),W()}),(0,i.wB)(R,function(e){var n=e.id;f.A.push({name:"room",params:{id:n}})}),(0,i.sV)((0,l.A)((0,u.A)().m(function e(){var n,a,l,i,s,o,c,v,d;return(0,u.A)().w(function(e){while(1)switch(e.n){case 0:if(n=f.A.currentRoute.value.params,a=n.type,l=n.id,!l||!a){e.n=5;break}if(i=l.split(":"),s=(0,r.A)(i,2),o=s[0],c=s[1],"movie"!==a){e.n=2;break}return e.n=1,m.A.getMetaMovie(o);case 1:d=e.v,e.n=4;break;case 2:return e.n=3,m.A.getMetaSeries(o);case 3:d=e.v;case 4:y.value=d,y.value&&y.value.videos&&y.value.videos.length&&(v=y.value.videos.find(function(e){var n=e.id;return n===l})||y.value.videos[0],w.value=parseInt(c)||1,C.value=v,E.value=(0,t.A)(new Set(y.value.videos.map(function(e){var n=e.season;return n}))).sort(function(e,n){return 0===e?1:0===n?-1:e-n})),W();case 5:return e.a(2)}},e)}))),function(e,n){return(0,i.uX)(),(0,i.CE)("div",M,[(0,i.bF)(s.eB,{name:"fade"},{default:(0,i.k6)(function(){return[L.value?((0,i.uX)(),(0,i.Wv)(k.A,{key:0,modelValue:L.value,"onUpdate:modelValue":n[0]||(n[0]=function(e){return L.value=e})},null,8,["modelValue"])):(0,i.Q3)("",!0)]}),_:1}),(0,i.Lk)("div",Q,[n[4]||(n[4]=(0,i.Lk)("div",{class:"blur"},null,-1)),y.value&&y.value.background?((0,i.uX)(),(0,i.CE)("div",{key:0,class:"image",style:(0,o.Tr)("background-image: url(".concat(y.value.background,")"))},null,4)):(0,i.Q3)("",!0)]),y.value?((0,i.uX)(),(0,i.CE)("div",T,[y.value.logo?((0,i.uX)(),(0,i.CE)("img",{key:0,class:"logo",src:y.value.logo,alt:""},null,8,G)):((0,i.uX)(),(0,i.CE)("div",O,(0,o.v_)(y.value.name),1)),(0,i.Lk)("div",j,[(0,i.Lk)("div",q,(0,o.v_)(y.value.year),1),(0,i.Lk)("div",z,(0,o.v_)(y.value.runtime),1)]),(0,i.Lk)("div",D,(0,o.v_)(y.value.description),1),(0,i.Lk)("div",H,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(y.value.genres,function(e){return(0,i.uX)(),(0,i.CE)("div",{class:"tag",key:e},(0,o.v_)(e),1)}),128))])])):(0,i.Q3)("",!0),V.value?((0,i.uX)(),(0,i.CE)("div",J,[(0,i.bF)(b.A,{segments:E.value,modelValue:w.value,"onUpdate:modelValue":n[1]||(n[1]=function(e){return w.value=e})},{segment:(0,i.k6)(function(e){var n=e.segment;return[n>0?((0,i.uX)(),(0,i.CE)("span",N,(0,o.v_)((0,c.R1)(a)("views.stream.season"))+" "+(0,o.v_)(n),1)):((0,i.uX)(),(0,i.CE)("span",P,(0,o.v_)((0,c.R1)(a)("views.stream.misc")),1))]}),_:1},8,["segments","modelValue"]),(0,i.bF)(A.A,{fixed:"",class:"list",modelValue:C.value,"onUpdate:modelValue":n[2]||(n[2]=function(e){return C.value=e}),items:$.value,itemKey:"id"},{left:(0,i.k6)(function(e){var n=e.item;return[(0,i.Lk)("div",Y,(0,o.v_)(n.episode),1)]}),right:(0,i.k6)(function(e){var n=e.item;return[(0,i.Lk)("div",Z,(0,o.v_)(n.name),1)]}),_:1},8,["modelValue","items"])])):(0,i.Q3)("",!0),(0,i.bF)(B,{streams:x.value,loading:h.value,onStreamClick:S},null,8,["streams","loading"]),(0,i.bF)(_.A,{large:"",class:"addons-button",icon:"cube-outline",onClick:n[3]||(n[3]=function(e){return L.value=!0})},{default:(0,i.k6)(function(){return[(0,i.eW)((0,o.v_)((0,c.R1)(a)("views.stream.streams.button")),1)]}),_:1})])}}};const ne=(0,U.A)(ee,[["__scopeId","data-v-1b78fadb"]]);var ae=ne,te=ae},89228:function(e,n,a){a(27495);var t=a(69565),r=a(36840),u=a(57323),l=a(79039),i=a(78227),s=a(66699),o=i("species"),c=RegExp.prototype;e.exports=function(e,n,a,v){var d=i(e),f=!l(function(){var n={};return n[d]=function(){return 7},7!==""[e](n)}),m=f&&!l(function(){var n=!1,a=/a/;if("split"===e){var t={};t[o]=function(){return a},a={constructor:t,flags:""},a[d]=/./[d]}return a.exec=function(){return n=!0,null},a[d](""),!n});if(!f||!m||a){var p=/./[d],g=n(d,""[e],function(e,n,a,r,l){var i=n.exec;return i===u||i===c.exec?f&&!l?{done:!0,value:t(p,n,a,r)}:{done:!0,value:t(e,a,n,r)}:{done:!1}});r(String.prototype,e,g[0]),r(c,d,g[1])}v&&s(c[d],"sham",!0)}}}]);