<div id="enhanced-player-overlay" class="enhanced-overlay">
    <div class="overlay-section overlay-main">
        <!-- Skip Controls -->
        <button id="skip-intro-btn" class="overlay-btn" title="Skip Intro (Shift+Left)">
            <svg viewBox="0 0 24 24" width="20" height="20">
                <path fill="currentColor" d="M5.59,7.41L10.18,12L5.59,16.59L7,18L13,12L7,6L5.59,7.41M16,6H18V18H16V6Z"/>
            </svg>
            <span>Skip Intro</span>
        </button>

        <button id="skip-outro-btn" class="overlay-btn" title="Skip Outro (Shift+Right)">
            <svg viewBox="0 0 24 24" width="20" height="20">
                <path fill="currentColor" d="M16,18H18V6H16M6,18L14.5,12L6,6V18Z"/>
            </svg>
            <span>Skip Outro</span>
        </button>

        <!-- Divider -->
        <div class="overlay-divider"></div>

        <!-- Playback Speed -->
        <div class="overlay-control speed-control">
            <label>Speed</label>
            <select id="playback-speed" title="Playback Speed ([ / ])">
                <option value="0.5">0.5x</option>
                <option value="0.75">0.75x</option>
                <option value="1" selected>1x</option>
                <option value="1.25">1.25x</option>
                <option value="1.5">1.5x</option>
                <option value="2">2x</option>
            </select>
        </div>

        <!-- Divider -->
        <div class="overlay-divider"></div>

        <!-- Screenshot -->
        <button id="screenshot-btn" class="overlay-btn overlay-btn-icon" title="Screenshot (S)">
            <svg viewBox="0 0 24 24" width="22" height="22">
                <path fill="currentColor" d="M4,4H7L9,2H15L17,4H20A2,2 0 0,1 22,6V18A2,2 0 0,1 20,20H4A2,2 0 0,1 2,18V6A2,2 0 0,1 4,4M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7M12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9Z"/>
            </svg>
        </button>

        <!-- Picture-in-Picture -->
        <button id="pip-btn" class="overlay-btn overlay-btn-icon" title="Picture-in-Picture (P)">
            <svg viewBox="0 0 24 24" width="22" height="22">
                <path fill="currentColor" d="M19,11H11V17H19V11M23,19V5C23,3.88 22.1,3 21,3H3A2,2 0 0,0 1,5V19A2,2 0 0,0 3,21H21A2,2 0 0,0 23,19M21,19H3V4.97H21V19Z"/>
            </svg>
        </button>
    </div>

    <!-- Subtitle Controls Section -->
    <div class="overlay-section overlay-subtitles">
        <div class="subtitle-delay-control">
            <button id="sub-delay-minus" class="overlay-btn-small" title="Subtitle Delay -0.5s (G)">-0.5s</button>
            <span id="sub-delay-value" class="delay-display">0.0s</span>
            <button id="sub-delay-plus" class="overlay-btn-small" title="Subtitle Delay +0.5s (H)">+0.5s</button>
        </div>

        <div class="overlay-divider"></div>

        <!-- Subtitle Style -->
        <div class="subtitle-style-control">
            <label>Size</label>
            <input type="range" id="subtitle-size" min="16" max="48" value="{{ subtitleFontSize }}" title="Subtitle Size">
            <span id="subtitle-size-value">{{ subtitleFontSize }}px</span>
        </div>
    </div>
</div>

<style id="enhanced-player-overlay-styles">
    #enhanced-player-overlay {
        position: fixed;
        bottom: 100px;
        left: 50%;
        transform: translateX(-50%);
        z-index: 10000;
        display: flex;
        flex-direction: column;
        gap: 8px;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.3s ease;
    }

    #enhanced-player-overlay.visible {
        opacity: 1;
        pointer-events: auto;
    }

    .overlay-section {
        display: flex;
        align-items: center;
        gap: 8px;
        background: rgba(0, 0, 0, 0.85);
        backdrop-filter: blur(10px);
        border-radius: 10px;
        padding: 10px 14px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
    }

    .overlay-divider {
        width: 1px;
        height: 24px;
        background: rgba(255, 255, 255, 0.2);
        margin: 0 4px;
    }

    .overlay-btn {
        display: flex;
        align-items: center;
        gap: 6px;
        background: rgba(255, 255, 255, 0.1);
        border: none;
        border-radius: 6px;
        padding: 8px 12px;
        color: white;
        font-size: 13px;
        font-weight: 500;
        cursor: pointer;
        transition: background 0.2s ease;
    }

    .overlay-btn:hover {
        background: rgba(255, 255, 255, 0.2);
    }

    .overlay-btn:active {
        background: rgba(255, 255, 255, 0.3);
    }

    .overlay-btn-icon {
        padding: 8px;
    }

    .overlay-btn-small {
        background: rgba(255, 255, 255, 0.1);
        border: none;
        border-radius: 4px;
        padding: 4px 8px;
        color: white;
        font-size: 12px;
        cursor: pointer;
        transition: background 0.2s ease;
    }

    .overlay-btn-small:hover {
        background: rgba(255, 255, 255, 0.2);
    }

    .overlay-control {
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .overlay-control label {
        color: rgba(255, 255, 255, 0.7);
        font-size: 12px;
        font-weight: 500;
    }

    .speed-control select {
        background: rgba(255, 255, 255, 0.1);
        border: none;
        border-radius: 4px;
        padding: 6px 10px;
        color: white;
        font-size: 13px;
        cursor: pointer;
        outline: none;
    }

    .speed-control select:hover {
        background: rgba(255, 255, 255, 0.2);
    }

    .speed-control select option {
        background: #1a1a2e;
        color: white;
    }

    .subtitle-delay-control {
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .delay-display {
        color: white;
        font-size: 13px;
        font-weight: 500;
        min-width: 50px;
        text-align: center;
    }

    .subtitle-style-control {
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .subtitle-style-control input[type="range"] {
        width: 80px;
        accent-color: #7b5bf5;
    }

    .subtitle-style-control span {
        color: white;
        font-size: 12px;
        min-width: 40px;
    }

    /* Screenshot flash animation */
    @keyframes screenshot-flash {
        0% { opacity: 0; }
        50% { opacity: 1; }
        100% { opacity: 0; }
    }

    #screenshot-flash {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: white;
        pointer-events: none;
        opacity: 0;
        z-index: 99999;
    }

    #screenshot-flash.flash {
        animation: screenshot-flash 0.3s ease;
    }

    /* Toast notification */
    .overlay-toast {
        position: fixed;
        bottom: 200px;
        left: 50%;
        transform: translateX(-50%);
        background: rgba(0, 0, 0, 0.9);
        color: white;
        padding: 12px 20px;
        border-radius: 8px;
        font-size: 14px;
        z-index: 10001;
        opacity: 0;
        transition: opacity 0.3s ease;
        pointer-events: none;
    }

    .overlay-toast.show {
        opacity: 1;
    }
</style>
