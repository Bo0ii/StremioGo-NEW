---
phase: 08-final-validation
plan: 01
type: execute
depends_on: []
files_modified: []
---

<objective>
Perform comprehensive search across entire codebase for any remaining MPV, V5, native-player, or Anime4K references.

Purpose: Ensure absolute zero integration traces remain after systematic removal in Phases 2-7.
Output: Complete search report documenting findings (or confirming clean state).
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-investigation-mapping/01-02-SUMMARY.md

**Tech stack available:** Electron, TypeScript, Node.js
**Established patterns:** Systematic grep searches, line number reporting
**Constraining decisions:**
- Phase 1: Mapped all integration points (16+ files, ~461 lines)
- Phase 2-6: Removed all core files, utilities, dependencies
- Phase 7: Verified build and runtime success

**Search scope from Phase 1 mapping:**
- Search terms: mpv, native-player, nativePlayer, V5, Anime4K, anime4k
- File types: .ts, .js, .json, .md, .html, .css
- Directories: src/, dist/, resources/, plugins/, themes/, root configs
- Expected result: Zero matches (all removed in prior phases)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Search source code for MPV references</name>
  <files>None (read-only search)</files>
  <action>
    Perform comprehensive grep searches across the codebase for remaining integration references:

    1. Search for "mpv" (case-insensitive):
       `grep -ri "mpv" src/ dist/ --include="*.ts" --include="*.js" --include="*.html" --include="*.css" 2>/dev/null || echo "No matches"`

    2. Search for "native-player" and "nativePlayer":
       `grep -ri "native-player\|nativePlayer" src/ dist/ --include="*.ts" --include="*.js" --include="*.html" --include="*.css" 2>/dev/null || echo "No matches"`

    3. Search for "V5" (community webview integration):
       `grep -ri "\\bV5\\b" src/ dist/ --include="*.ts" --include="*.js" 2>/dev/null || echo "No matches"`

    4. Search for "Anime4K" or "anime4k":
       `grep -ri "anime4k" src/ dist/ --include="*.ts" --include="*.js" 2>/dev/null || echo "No matches"`

    5. Search package.json for MPV-related dependencies:
       `grep -i "mpv\|native-player\|anime4k" package.json 2>/dev/null || echo "No matches"`

    Document each search result with:
    - File path and line number if matches found
    - Context (surrounding code) to determine if false positive
    - Recommendation (remove if genuine reference, ignore if false positive like comments/strings in unrelated context)

    Expected outcome: Zero genuine references (all removed in Phases 2-7). Any matches should be:
    - False positives (e.g., "improvement" contains "mpv")
    - Comments/documentation that can be ignored
    - Already-cleaned files (search confirms removal success)
  </action>
  <verify>All grep commands executed successfully, results documented</verify>
  <done>Complete search report created showing zero genuine MPV/V5/native-player references remain</done>
</task>

<task type="auto">
  <name>Task 2: Search resources and config files</name>
  <files>None (read-only search)</files>
  <action>
    Search non-source directories for orphaned references:

    1. Search resources directory:
       `ls -la resources/ 2>/dev/null`
       Confirm `resources/mpv/` directory does NOT exist (removed in Phase 2)

    2. Search root configuration files:
       `grep -i "mpv\|native-player\|anime4k" *.json *.md README.md CLAUDE.md 2>/dev/null || echo "No matches"`

    3. Search plugins directory for integration hooks:
       `grep -ri "mpv\|native-player" plugins/ --include="*.js" 2>/dev/null || echo "No matches"`

    4. Search themes directory:
       `grep -ri "mpv\|native-player" themes/ --include="*.css" 2>/dev/null || echo "No matches"`

    5. Check for orphaned compiled output in dist/:
       `ls dist/components/ | grep -i "native-player" 2>/dev/null || echo "Clean"`
       `ls dist/utils/ | grep -i "Mpv\|Anime4K" 2>/dev/null || echo "Clean"`
       `ls dist/core/ | grep -i "NativePlayerConfig" 2>/dev/null || echo "Clean"`

    Document any findings with full context. Resources directory should be completely clean after Phase 2.
  </action>
  <verify>All directories searched, no orphaned files or references found</verify>
  <done>Confirmed resources/, plugins/, themes/, and root configs contain zero MPV/V5 references</done>
</task>

<task type="auto">
  <name>Task 3: Verify TypeScript compilation detects no orphaned imports</name>
  <files>None (verification only)</files>
  <action>
    Run TypeScript compilation to catch any missed imports or type references:

    1. Clean build:
       `npm run dist`

    2. Analyze build output for warnings about:
       - Unused imports (should be none related to MPV)
       - Type errors (should be zero)
       - Missing files (should be zero)

    3. Check dist/ directory structure:
       `ls -la dist/core/ dist/utils/ dist/components/`
       Confirm these files do NOT exist:
       - dist/core/NativePlayerConfig.js
       - dist/utils/MpvManager.js
       - dist/utils/MpvPlaybackController.js
       - dist/utils/Anime4KProfiles.js
       - dist/components/native-player-*/ directories

    TypeScript strict mode (enabled in this project) will catch:
    - Orphaned imports referencing deleted files
    - Type references to removed interfaces
    - Unused local variables from removed code

    Expected: Build succeeds with zero errors, zero warnings about MPV/native-player files.
  </action>
  <verify>npm run dist completes successfully with zero TypeScript errors</verify>
  <done>Build confirms zero orphaned imports, types, or file references to MPV integration</done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] All grep searches executed and results documented
- [ ] Zero genuine MPV/V5/native-player/Anime4K references found in codebase
- [ ] Resources directory confirmed clean (no mpv/ subdirectory)
- [ ] TypeScript build succeeds with zero errors/warnings
- [ ] dist/ directory contains no MPV-related compiled files
</verification>

<success_criteria>

- All search commands executed successfully
- Complete documentation of search results (or confirmation of clean state)
- Zero genuine integration references found (false positives documented and explained)
- TypeScript compilation confirms no orphaned imports or types
- Ready for final documentation in Plan 08-02
</success_criteria>

<output>
After completion, create `.planning/phases/08-final-validation/08-01-SUMMARY.md`:

# Phase 8 Plan 1: Comprehensive Reference Search Summary

**[Substantive one-liner describing search results]**

## Accomplishments

- Executed N grep searches across source, resources, configs, plugins, themes
- Searched for: mpv, native-player, nativePlayer, V5, Anime4K patterns
- Found: [X matches / zero matches] with detailed analysis
- Verified TypeScript build detects no orphaned imports
- Confirmed dist/ directory clean of MPV compiled files

## Files Created/Modified

- None (read-only search phase)

## Decisions Made

[Any decisions about handling edge cases, or "None - search-only phase"]

## Issues Encountered

[Any unexpected findings or false positives, or "None - clean state confirmed"]

## Next Step

Ready for 08-02: Document cleanup completion and verify all requirements met
</output>
