---
phase: 02-core-file-removal
plan: 03
type: execute
depends_on: ["02-02"]
files_modified: []
---

<objective>
Remove Anime4K shader profile definitions and verify all core files removed.

Purpose: Complete Phase 2 by removing remaining MPV-related utility (Anime4K profiles), then verify no core integration files remain in src/core or src/utils.
Output: Anime4KProfiles.ts deleted, comprehensive verification that all core MPV files are gone, git commit documenting completion.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-plan.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-investigation-mapping/01-01-SUMMARY.md
@.planning/phases/01-investigation-mapping/01-02-SUMMARY.md
@.planning/phases/01-investigation-mapping/integration-points.md
@.planning/phases/02-core-file-removal/02-01-SUMMARY.md
@.planning/phases/02-core-file-removal/02-02-SUMMARY.md

**Tech stack available:**
- TypeScript 5.7.2 (strict mode)
- Electron 37.3.1
- Build: tsc compiles to dist/

**Established patterns:**
- Utilities in `src/utils/` for service modules
- Compiled outputs in `dist/` mirror src/ structure

**Constraining decisions:**
- Phase 1 identified Anime4KProfiles.ts as 150-line shader profile manager
- Used by MpvManager (already deleted in 02-02)
- No other dependencies on this file

**From 02-01:**
- UI components deleted (native-player-controls, native-player-injector)

**From 02-02:**
- Core utilities deleted (MpvManager, MpvBinaryManager, NativePlayerConfig)

**Issues being addressed:**
- Complete removal of MPV/V5 integration core files
- Final verification that src/core and src/utils are clean
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove Anime4KProfiles.ts utility</name>
  <files>src/utils/Anime4KProfiles.ts</files>
  <action>Delete `src/utils/Anime4KProfiles.ts` (150 lines). This defines Anime4K shader profiles for video upscaling in MPV player. No longer needed after MPV integration removal. Also delete compiled output `dist/utils/Anime4KProfiles.js` and `dist/utils/Anime4KProfiles.js.map` if they exist.</action>
  <verify>File no longer exists: `ls src/utils/Anime4KProfiles.ts 2>&1` should return "No such file or directory"</verify>
  <done>Anime4KProfiles.ts and compiled outputs deleted from filesystem</done>
</task>

<task type="auto">
  <name>Task 2: Verify no MPV files remain in src/core and src/utils</name>
  <files>N/A (verification only)</files>
  <action>Run comprehensive search to verify no MPV-related files remain in core business logic directories. Search for patterns: "mpv", "native-player", "nativePlayer", "anime4k" in src/core/ and src/utils/. This catches any files that may have been missed or have non-standard naming. Use case-insensitive grep to be thorough.</action>
  <verify>Search returns zero results for MPV patterns: `grep -ri "mpv\|native-player\|nativePlayer\|anime4k" src/core/ src/utils/ 2>&1` should return "No such file or directory" or empty results</verify>
  <done>Confirmed no MPV-related files remain in src/core/ or src/utils/</done>
</task>

<task type="auto">
  <name>Task 3: Verify no MPV compiled outputs remain in dist</name>
  <files>N/A (verification only)</files>
  <action>Check dist/core/ and dist/utils/ for any remaining MPV-related compiled files (.js or .js.map). Search for MpvManager, MpvBinaryManager, NativePlayerConfig, Anime4KProfiles patterns. If dist/ doesn't exist yet (hasn't been built), that's fine - verification passes automatically.</action>
  <verify>No MPV files in dist: `ls dist/core/NativePlayerConfig.* dist/utils/Mpv* dist/utils/Anime4K* 2>&1` should all return "No such file or directory"</verify>
  <done>Confirmed no MPV-related compiled outputs remain in dist/</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `ls src/utils/Anime4KProfiles.ts 2>&1` returns "No such file or directory"
- [ ] `grep -ri "mpv\|native-player\|anime4k" src/core/ src/utils/` returns no results
- [ ] `ls dist/utils/Anime4K* 2>&1` returns "No such file or directory"
- [ ] Git status shows all Phase 2 deletions ready to commit
- [ ] Phase 2 complete: All core MPV files removed from src/core, src/utils, and src/components
</verification>

<success_criteria>

- Anime4KProfiles.ts removed from src/utils/
- Compiled outputs removed from dist/ (if present)
- Comprehensive search confirms no MPV files in src/core/ or src/utils/
- Phase 2 complete - all core integration files deleted
- Changes staged and ready for commit
</success_criteria>

<output>
After completion, create `.planning/phases/02-core-file-removal/02-03-SUMMARY.md`:

# Phase 2 Plan 3: Anime4K Removal and Verification Summary

**Removed Anime4K profiles and verified Phase 2 complete: 1 file deleted, comprehensive verification passed**

## Accomplishments

- Deleted src/utils/Anime4KProfiles.ts (150 lines - shader profiles)
- Cleaned up compiled outputs in dist/
- Verified no MPV files remain in src/core/ or src/utils/
- Verified no MPV compiled outputs remain in dist/
- **Phase 2 complete**: All core MPV integration files removed

## Files Created/Modified

**Deleted:**
- `src/utils/Anime4KProfiles.ts`
- `dist/utils/Anime4KProfiles.js` + `.js.map` (if existed)

**Verified Clean:**
- `src/core/` - No MPV-related files
- `src/utils/` - No MPV-related files
- `src/components/` - No native-player directories
- `dist/` - No MPV-related compiled outputs

## Decisions Made

None - straightforward file deletion and verification as planned

## Issues Encountered

None - file was self-contained with no remaining dependencies

## Statistics

**Phase 2 totals:**
- Directories deleted: 2 (native-player-controls, native-player-injector)
- Files deleted: 4 (MpvManager, MpvBinaryManager, NativePlayerConfig, Anime4KProfiles)
- Total lines removed: ~1,375 lines (821 + 119 + 285 + 150)
- Compiled outputs cleaned: 8+ files (.js and .js.map for each)

## Next Phase Readiness

**Phase 3: UI Cleanup** - Ready to begin

The next phase will remove the native player UI integration from Plus Page:
- Remove native player subpage from plus-page.html (6 lines)
- Remove native player logic from plusPage.ts (280 lines)

**Dependencies satisfied:**
- Core MPV files removed (Phase 2 complete)
- Safe to edit UI integration points knowing business logic is gone

## Next Step

Ready for **Phase 3** - Remove native player subpage from Plus Page UI
</output>
