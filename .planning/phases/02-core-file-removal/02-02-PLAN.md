---
phase: 02-core-file-removal
plan: 02
type: execute
depends_on: ["02-01"]
files_modified: []
---

<objective>
Remove core MPV utility and configuration files from codebase.

Purpose: Eliminate the business logic layer of MPV integration (process management, binary management, configuration) following UI component removal.
Output: Four TypeScript files deleted (MpvManager, MpvBinaryManager, NativePlayerConfig, plus compiled outputs), git commit documenting removal.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-plan.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-investigation-mapping/01-01-SUMMARY.md
@.planning/phases/01-investigation-mapping/01-02-SUMMARY.md
@.planning/phases/01-investigation-mapping/integration-points.md
@.planning/phases/02-core-file-removal/02-01-SUMMARY.md

**Tech stack available:**
- TypeScript 5.7.2 (strict mode)
- Electron 37.3.1
- Build: tsc compiles to dist/, creates .js and .js.map files

**Established patterns:**
- Core logic in `src/core/` for business logic modules
- Utilities in `src/utils/` for service modules
- Compiled outputs in `dist/` mirror src/ structure

**Constraining decisions:**
- Phase 1 identified these as self-contained modules with 821, 119, 285, and 150 lines respectively
- No circular dependencies - safe to delete before removing imports
- Imports from main.ts/preload.ts will be cleaned up in Phase 5-6

**From 02-01:**
- UI components already deleted
- Safe to proceed with core logic removal

**Issues being addressed:**
- Complete removal of MPV/V5 integration as planned in PROJECT.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove MpvManager.ts utility</name>
  <files>src/utils/MpvManager.ts</files>
  <action>Delete `src/utils/MpvManager.ts` (821 lines). This is the core MPV process lifecycle and IPC communication manager. Handles MPV spawning, socket IPC, property observation, and command queue. No longer needed after integration removal. Also delete compiled output `dist/utils/MpvManager.js` and `dist/utils/MpvManager.js.map` if they exist.</action>
  <verify>File no longer exists: `ls src/utils/MpvManager.ts 2>&1` should return "No such file or directory"</verify>
  <done>MpvManager.ts and compiled outputs deleted from filesystem</done>
</task>

<task type="auto">
  <name>Task 2: Remove MpvBinaryManager.ts utility</name>
  <files>src/utils/MpvBinaryManager.ts</files>
  <action>Delete `src/utils/MpvBinaryManager.ts` (119 lines). This manages MPV binary location detection (system PATH or bundled binary) and verification. No longer needed after integration removal. Also delete compiled output `dist/utils/MpvBinaryManager.js` and `dist/utils/MpvBinaryManager.js.map` if they exist.</action>
  <verify>File no longer exists: `ls src/utils/MpvBinaryManager.ts 2>&1` should return "No such file or directory"</verify>
  <done>MpvBinaryManager.ts and compiled outputs deleted from filesystem</done>
</task>

<task type="auto">
  <name>Task 3: Remove NativePlayerConfig.ts core module</name>
  <files>src/core/NativePlayerConfig.ts</files>
  <action>Delete `src/core/NativePlayerConfig.ts` (285 lines). This manages INI file parsing, configuration schema, and validation for MPV settings. No longer needed after integration removal. Also delete compiled output `dist/core/NativePlayerConfig.js` and `dist/core/NativePlayerConfig.js.map` if they exist.</action>
  <verify>File no longer exists: `ls src/core/NativePlayerConfig.ts 2>&1` should return "No such file or directory"</verify>
  <done>NativePlayerConfig.ts and compiled outputs deleted from filesystem</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `ls src/utils/Mpv*.ts 2>&1` returns "No such file or directory"
- [ ] `ls src/core/NativePlayerConfig.ts 2>&1` returns "No such file or directory"
- [ ] `ls dist/utils/Mpv*.js 2>&1` returns "No such file or directory"
- [ ] `ls dist/core/NativePlayerConfig.js 2>&1` returns "No such file or directory"
- [ ] Git status shows deleted files ready to commit
</verification>

<success_criteria>

- All MPV utility and config files removed from src/
- Compiled outputs removed from dist/ (if present)
- No Mpv* or NativePlayerConfig files remain in codebase
- Changes staged and ready for commit
</success_criteria>

<output>
After completion, create `.planning/phases/02-core-file-removal/02-02-SUMMARY.md`:

# Phase 2 Plan 2: Core Utility Files Removal Summary

**Removed core MPV business logic files: 3 files deleted (1,225 lines total)**

## Accomplishments

- Deleted src/utils/MpvManager.ts (821 lines - process lifecycle and IPC)
- Deleted src/utils/MpvBinaryManager.ts (119 lines - binary detection)
- Deleted src/core/NativePlayerConfig.ts (285 lines - config management)
- Cleaned up compiled outputs in dist/
- Core MPV integration logic completely removed

## Files Created/Modified

**Deleted:**
- `src/utils/MpvManager.ts`
- `src/utils/MpvBinaryManager.ts`
- `src/core/NativePlayerConfig.ts`
- `dist/utils/MpvManager.js` + `.js.map` (if existed)
- `dist/utils/MpvBinaryManager.js` + `.js.map` (if existed)
- `dist/core/NativePlayerConfig.js` + `.js.map` (if existed)

## Decisions Made

None - straightforward file deletion as planned

## Issues Encountered

None expected - files are self-contained modules with no circular dependencies

## Next Step

Ready for **02-03-PLAN.md** - Remove Anime4KProfiles.ts and related utilities
</output>
