---
phase: 04-dependencies-configuration
plan: 01
type: execute
depends_on: []
files_modified: []
---

<objective>
Remove MPV-related resources and verify package.json is clean.

Purpose: Complete the cleanup of MPV integration by removing bundled MPV binaries and confirming no MPV-related npm dependencies exist.
Output: Clean resources directory (MPV binaries deleted), verified package.json with no MPV dependencies, ready for main process cleanup.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-plan.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-ui-cleanup/03-02-SUMMARY.md
@.planning/phases/02-core-file-removal/02-03-SUMMARY.md
@.planning/phases/01-investigation-mapping/01-02-SUMMARY.md

**Prior work:**
- Phase 1: Identified all MPV integration points (~2,500 lines mapped)
- Phase 2: Removed core MPV files (4 files, ~1,375 lines deleted)
- Phase 3: Removed native player UI from Plus Page (~284 lines deleted)

**Current state:**
- Core MPV TypeScript files removed (MpvManager, MpvBinaryManager, NativePlayerConfig, Anime4KProfiles)
- Native player UI removed from Plus Page (HTML + TypeScript)
- TypeScript compilation succeeds with 0 errors
- Resources directory still contains `resources/mpv/` (113MB of MPV binaries)

**Investigation findings (Phase 1):**
- Phase 1 Plan 2 identified `resources/mpv/win32-x64/` directory containing MPV binaries
- Investigation noted: "Bundled Binaries Only for Windows x64" - other platforms were never implemented
- package.json was checked during investigation - no MPV-specific npm dependencies found
- `ini` package mentioned in Phase 1 (used ONLY by NativePlayerConfig.ts) - NativePlayerConfig.ts was deleted in Phase 2, so `ini` may be unused

**Properties.ts already clean:**
- Phase 2 Plan 3 noted unused native player path definitions in Properties.ts (lines 32-37)
- Current Properties.ts verification shows only 33 lines total with no MPV paths
- File has already been cleaned (likely in Phase 3's uncommitted work cleanup)

**Constants already clean:**
- Verification shows no NATIVE_PLAYER or MPV-related constants in src/constants/index.ts
- IPC_CHANNELS, STORAGE_KEYS all clean

**Ready for this phase:**
- Only remaining artifact: `resources/mpv/` directory (113MB)
- package.json needs verification (expected to be clean)
- Configuration files need verification
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove resources/mpv directory</name>
  <files>resources/mpv/</files>
  <action>Delete the entire `resources/mpv/` directory containing MPV binaries (113MB). This directory contains bundled MPV player binaries for win32-x64 only. Use Bash with `rm -rf` to remove the directory and all contents. Verify deletion with `ls resources/` afterward.</action>
  <verify>ls resources/ shows directory is gone, du -sh resources/mpv returns "does not exist"</verify>
  <done>resources/mpv/ directory deleted, resources/ directory either empty or contains only other non-MPV resources</done>
</task>

<task type="auto">
  <name>Task 2: Verify package.json has no MPV dependencies</name>
  <files>package.json</files>
  <action>Search package.json for any MPV-related dependencies using grep -i for patterns: "mpv", "anime4k", "native.*player", "v5.*webview". Investigation already confirmed package.json is clean, but perform comprehensive verification. Also check if `ini` package exists in dependencies - if it does, search codebase to confirm it's unused (grep -r "import.*ini\|require.*ini" src/ should return no matches since NativePlayerConfig.ts was deleted). Do NOT modify package.json unless MPV dependencies are found (which is unlikely).</action>
  <verify>grep -i "mpv\|anime4k\|native.*player\|v5.*webview" package.json returns no matches, grep -r "import.*ini\|require.*ini" src/ returns no real matches (ignore false positives like "initializing")</verify>
  <done>package.json confirmed clean with no MPV-related dependencies, ini package status verified (either absent or confirmed unused)</done>
</task>

<task type="auto">
  <name>Task 3: Verify configuration files are clean</name>
  <files>tsconfig.json, .eslintrc, package-lock.json (if exists)</files>
  <action>Search all JSON configuration files for MPV references using grep -i patterns: "mpv", "anime4k", "native.*player". Check tsconfig.json, .eslintrc, and any other config files in root. For package-lock.json, verify no MPV-related packages exist. These files should all be clean based on prior investigation, but perform comprehensive verification to ensure nothing was missed.</action>
  <verify>grep -i "mpv\|anime4k\|native.*player" on all config files returns no matches (or only integrity hashes in package-lock.json)</verify>
  <done>All configuration files verified clean, no MPV-related entries in tsconfig.json, .eslintrc, or package-lock.json</done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] resources/mpv/ directory deleted (113MB freed)
- [ ] package.json contains no MPV-related dependencies
- [ ] Configuration files (tsconfig.json, .eslintrc) contain no MPV references
- [ ] Codebase still compiles: npm run dist succeeds
- [ ] No MPV-related files remain in resources/
</verification>

<success_criteria>

- resources/mpv/ directory completely removed
- package.json verified clean (no MPV dependencies)
- All configuration files verified clean
- TypeScript compilation succeeds
- Phase 4 ready for Phase 5 (main process cleanup)
</success_criteria>

<output>
After completion, create `.planning/phases/04-dependencies-configuration/04-01-SUMMARY.md`:

# Phase 4 Plan 1: Dependencies & Configuration Cleanup Summary

**[Substantive one-liner - what was removed and verified]**

## Accomplishments

- Removed resources/mpv/ directory (~113MB of MPV binaries)
- Verified package.json has no MPV-related dependencies
- Verified all configuration files clean (tsconfig.json, .eslintrc, package-lock.json)
- [Any other accomplishments]

## Files Created/Modified

- Deleted: `resources/mpv/` directory (113MB)
- Verified: `package.json` (no changes needed - already clean)
- Verified: Configuration files (no changes needed - already clean)

## Decisions Made

[Any decisions made during cleanup, or "None"]

## Issues Encountered

[Any issues encountered and how they were resolved, or "None"]

## Next Phase Readiness

**Phase 5: Main Process Cleanup** - Ready to begin

Next task: Remove MPV initialization and IPC handlers from main.ts (~154 lines as identified in Phase 1).

**Evidence of readiness:**
- All MPV resources removed
- No MPV dependencies in package.json
- Configuration files clean
- App still compiles successfully
- Ready to edit main.ts and remove IPC handlers
</output>
