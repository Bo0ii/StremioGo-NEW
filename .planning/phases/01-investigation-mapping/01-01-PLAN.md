---
phase: 01-investigation-mapping
plan: 01
type: execute
depends_on: []
files_modified: [.planning/phases/01-investigation-mapping/integration-points.md]
---

<objective>
Identify all MPV/V5 integration files and directories in the codebase by comparing against the reference implementation and searching for integration patterns.

Purpose: Create comprehensive inventory of integration points before removal to ensure nothing is missed.
Output: Document listing all MPV/V5 integration files, directories, and code references.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-plan.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/codebase/STRUCTURE.md
@.planning/codebase/CONCERNS.md

**Reference implementation:**
The `stremio-community-v5-webview-windows/` directory contains the original V5 integration that was brought into this project. We need to identify what was added.

**Known integration points from git status:**
- `src/components/native-player-controls/`
- `src/components/native-player-injector/`
- `src/core/NativePlayerConfig.ts`
- `src/utils/Anime4KProfiles.ts`
- `src/utils/MpvBinaryManager.ts`
- `src/utils/MpvManager.ts`
- `resources/` directory (may contain MPV binaries)

**Plus Page integration:**
PROJECT.md mentions native player subpage in Plus Page for toggling MPV, so we need to search:
- `src/components/plus-page/plus-page.html`
- `src/components/plus-page/plusPage.ts`
</context>

<tasks>

<task type="auto">
  <name>Task 1: Search for MPV-related file references</name>
  <files>.planning/phases/01-investigation-mapping/integration-points.md</files>
  <action>Use Grep to search for all references to MPV, native-player, V5, and anime4k across the codebase. Search patterns: "mpv", "Mpv", "MPV", "native-player", "nativePlayer", "NativePlayer", "anime4k", "Anime4K", "v5-webview", "community-v5". Search in src/, package.json, and config files. Document all file paths that contain these references, grouped by category (components, utilities, core, configuration, UI references).</action>
  <verify>Grep results show all matches, output saved to integration-points.md</verify>
  <done>Complete list of files referencing MPV/V5 integration documented</done>
</task>

<task type="auto">
  <name>Task 2: Identify MPV dependencies in package.json</name>
  <files>.planning/phases/01-investigation-mapping/integration-points.md</files>
  <action>Read package.json and identify all dependencies related to MPV or native video playback (e.g., mpv-related packages, video codec libraries, native bindings). Document each dependency name, version, and purpose. Also check for any scripts related to MPV (build scripts, binary downloads, etc.).</action>
  <verify>package.json read successfully, dependencies listed in integration-points.md</verify>
  <done>All MPV-related dependencies identified and documented</done>
</task>

<task type="auto">
  <name>Task 3: Analyze reference directory structure</name>
  <files>.planning/phases/01-investigation-mapping/integration-points.md</files>
  <action>If stremio-community-v5-webview-windows/ exists, use Glob and Read to examine its structure and identify what components/files were brought into the main codebase. List the mapping between reference directory files and current codebase files. If directory doesn't exist, note this in the document and proceed with search-based identification only.</action>
  <verify>Reference directory analyzed (if exists), mappings documented</verify>
  <done>Reference comparison complete or noted as unavailable</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] integration-points.md exists with comprehensive file list
- [ ] All grep searches completed for MPV/native-player/V5 patterns
- [ ] package.json dependencies analyzed
- [ ] Reference directory examined (if exists)
</verification>

<success_criteria>

- All tasks completed
- integration-points.md contains categorized list of integration files
- No MPV-related file or reference missed
- Ready for Plan 01-02 (dependency analysis)
</success_criteria>

<output>
After completion, create `.planning/phases/01-investigation-mapping/01-01-SUMMARY.md`:

# Phase 1 Plan 1: Integration File Discovery Summary

**[One-line summary of what was found]**

## Accomplishments

- Searched codebase for MPV/V5 integration patterns
- Identified [N] files containing integration code
- Analyzed package.json for MPV dependencies
- [Compared against reference directory OR noted reference unavailable]

## Files Created/Modified

- `.planning/phases/01-investigation-mapping/integration-points.md` - Complete inventory of integration files

## Decisions Made

None - pure discovery phase

## Issues Encountered

[Any unexpected findings or concerns]

## Next Step

Ready for 01-02-PLAN.md - Document integration points and dependencies
</output>
