# Codebase Structure

**Analysis Date:** 2026-01-14

## Directory Layout

```
StremioGo-NEW/
├── src/                          # Source TypeScript code
│   ├── main.ts                   # Electron main process entry
│   ├── preload.ts                # Renderer initialization & UI injection
│   ├── core/                     # Core business logic
│   ├── utils/                    # Service utilities
│   ├── components/               # UI components (TS + HTML)
│   ├── constants/                # Centralized constants
│   └── interfaces/               # Type definitions
├── dist/                         # Compiled output (generated)
├── plugins/                      # Bundled plugins
├── themes/                       # Bundled themes
├── resources/                    # Extra resources for packaging
├── images/                       # App icons and resources
├── docs/                         # Documentation
├── examples/                     # Example files
├── .github/                      # CI/CD workflows
├── package.json                  # Dependencies & scripts
├── tsconfig.json                 # TypeScript config
├── copyComponents.js             # Build script for HTML templates
└── CLAUDE.md                     # Project instructions for Claude
```

## Directory Purposes

**src/**
- Purpose: All TypeScript source code
- Contains: main.ts, preload.ts, core/, utils/, components/, constants/, interfaces/
- Key files: `src/main.ts` (main process), `src/preload.ts` (renderer initialization)
- Subdirectories: Organized by layer (core, utils, components)

**src/core/**
- Purpose: Core business logic and configuration
- Contains: `ModManager.ts`, `Settings.ts`, `Updater.ts`, `Properties.ts`, `StreamingConfig.ts`, `NativePlayerConfig.ts`
- Key files: `ModManager.ts` - Plugin/theme management
- Subdirectories: None (flat structure)

**src/utils/**
- Purpose: Service utilities and helpers
- Contains: `StreamingServer.ts`, `StremioService.ts`, `DiscordPresence.ts`, `ExternalPlayer.ts`, `MpvManager.ts`, `PartyService.ts`, `Helpers.ts`, `logger.ts`, `TemplateCache.ts`
- Key files: `logger.ts` - Winston logging, `TemplateCache.ts` - Template loading
- Subdirectories: None

**src/components/**
- Purpose: UI components with TypeScript + HTML template pairs
- Contains: Component directories (e.g., `mods-tab/`, `native-player-controls/`)
- Key files: Each component has `.ts` and `.html` files
- Subdirectories:
  - `mods-tab/` - Plugins & themes UI
  - `native-player-controls/` - Native player controls
  - `party-*/` - Watch party features
  - `appearance-category/`, `tweaks-category/`, `about-category/` - Settings categories

**src/constants/**
- Purpose: Centralized constants
- Contains: `index.ts` - CSS selectors, IPC channels, URLs, storage keys
- Key files: `index.ts` only
- Subdirectories: None

**src/interfaces/**
- Purpose: TypeScript type definitions
- Contains: `MetaData.ts` - Plugin/theme metadata structure
- Key files: `MetaData.ts`
- Subdirectories: None

**dist/**
- Purpose: Compiled JavaScript output
- Contains: Compiled .js files, copied .html templates, source maps
- Key files: `main.js`, `preload.js`
- Subdirectories: Mirrors src/ structure
- Generated by: `npm run dist`

**plugins/**
- Purpose: Bundled plugins shipped with app
- Contains: `.plugin.js` files (e.g., `card-hover-info.plugin.js`, `scroll-arrows.plugin.js`)
- Key files: Always-enabled plugins
- Subdirectories: None
- Copied to: `dist/plugins/` during build

**themes/**
- Purpose: Bundled themes shipped with app
- Contains: `.theme.css` files (e.g., `liquid-glass.theme.css`)
- Key files: Default locked theme
- Subdirectories: None
- Copied to: `dist/themes/` during build

**resources/**
- Purpose: Extra resources for Electron Builder
- Contains: Platform-specific binaries (stremio-service), plugins, themes
- Key files: `stremio-service-windows/`, `stremio-service-macos/`, `stremio-service-linux/`
- Subdirectories: Organized by platform

## Key File Locations

**Entry Points:**
- `src/main.ts` - Electron main process entry
- `src/preload.ts` - Renderer preload script
- `dist/main.js` - Compiled main process (Electron entry)

**Configuration:**
- `package.json` - Dependencies, scripts, Electron Builder config
- `tsconfig.json` - TypeScript compiler options
- `.eslintrc` - ESLint configuration
- `copyComponents.js` - Build script to copy HTML templates

**Core Logic:**
- `src/core/ModManager.ts` - Plugin/theme lifecycle
- `src/core/Settings.ts` - Settings UI injection
- `src/core/Updater.ts` - Auto-update management
- `src/core/Properties.ts` - Platform-specific paths

**Services:**
- `src/utils/StreamingServer.ts` - Streaming server management
- `src/utils/DiscordPresence.ts` - Discord Rich Presence
- `src/utils/logger.ts` - Winston logging
- `src/utils/TemplateCache.ts` - Template caching

**Constants:**
- `src/constants/index.ts` - All centralized constants

**Testing:**
- None currently present

**Documentation:**
- `CLAUDE.md` - Project instructions for Claude Code
- `docs/` - Additional documentation
- `README.md` - User-facing documentation (not analyzed)

## Naming Conventions

**Files:**
- TypeScript: camelCase for components, PascalCase for core/utils (`modsTab.ts`, `ModManager.ts`)
- HTML templates: kebab-case (`mods-tab.html`, `native-player-controls.html`)
- Plugins: kebab-case with `.plugin.js` suffix (`card-hover-info.plugin.js`)
- Themes: kebab-case with `.theme.css` suffix (`liquid-glass.theme.css`)

**Directories:**
- kebab-case for all directories (`src/components/`, `src/core/`, `native-player-controls/`)
- Component directories match HTML file naming

**Special Patterns:**
- Component pairs: `componentName.ts` + `component-name.html`
- Entry points: `main.ts`, `preload.ts`
- Build outputs: `dist/` mirrors `src/` structure

## Where to Add New Code

**New Feature:**
- Primary code: `src/utils/` for services, `src/core/` for business logic
- UI: `src/components/new-feature/` with `.ts` + `.html` files
- Config: Add constants to `src/constants/index.ts`

**New Component:**
- Implementation: `src/components/component-name/componentName.ts`
- Template: `src/components/component-name/component-name.html`
- Types: `src/interfaces/` if shared types needed

**New Plugin:**
- Bundled: `plugins/plugin-name.plugin.js`
- Will be copied to `dist/plugins/` during build

**New Theme:**
- Bundled: `themes/theme-name.theme.css`
- Will be copied to `dist/themes/` during build

**Utilities:**
- Shared helpers: `src/utils/NewUtility.ts`
- Type definitions: `src/interfaces/NewInterface.ts`

## Special Directories

**dist/**
- Purpose: Build output (compiled TypeScript + copied templates)
- Source: Generated by `npm run dist` (tsc + copyComponents.js)
- Committed: No (in .gitignore)

**resources/**
- Purpose: Electron Builder extra resources
- Source: Platform-specific binaries and bundled mods
- Committed: Yes (part of distribution)

**User Config Directories** (runtime, not in repo):
- Windows: `%APPDATA%/streamgo/`
- macOS: `~/Library/Application Support/streamgo/`
- Linux: `~/.config/streamgo/`
- Contains: User plugins, themes, native player config, streaming server

---

*Structure analysis: 2026-01-14*
*Update when directory structure changes*
